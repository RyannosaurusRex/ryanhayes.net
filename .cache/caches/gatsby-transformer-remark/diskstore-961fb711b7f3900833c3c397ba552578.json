{"expireTime":9007200859288004000,"key":"transformer-remark-markdown-html-b572df9d2fb99eebe593d749b24cd909-gatsby-remark-embed-gistgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-abbrgatsby-remark-imagesgatsby-remark-prismjs-","val":"<p>I love Ember. It helps me build <em>fantastic</em> UIs, but security isn’t super straightforward and I suck at it. I love ASP.NET MVC. It help me build secure applications and solid APIs, but for some apps I need a great responsive UI with great interaction.</p>\n<p>Together, these two technologies can be used in conjunction with one another to create really amazing apps (and really quickly, too). So this guide is to show you how to set them up so that you get ASP.NET’s security benefits with authentication and authorization, and then have Ember take over once you’re signed in for an incredible Single Page App (SPA) experience.</p>\n<p><em>Note:</em> This article assumes you have created a stock new ASP.NET project within Visual Studio and included MVC and WebAPI options. It also assumes you have EmberCLI installed and have run <code class=\"language-text\">ember new my-ember-app</code> into a directory in the root of your ASP.NET MVC project.</p>\n<p>In whatever route in your MVC app that goes to /App (or whatever you want your “app” route to be named), return the <code class=\"language-text\">index.html</code> that’s built from your Ember app.</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token punctuation\">[</span><span class=\"token class-name\">RequireHttps</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppController</span> <span class=\"token punctuation\">:</span> <span class=\"token class-name\">Controller</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span><span class=\"token class-name\">Authorize</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ActionResult</span> <span class=\"token function\">Index</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">File</span><span class=\"token punctuation\">(</span>Server<span class=\"token punctuation\">.</span><span class=\"token function\">MapPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"~/my-ember-app/dist/\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"index.html\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"text/html\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ASP.NET MVC will set the root of the app and make it different than if you were serving the Ember.js app by itself, so you’ll need to modify the asset folder URL to the folder relative to the MVC app, like so:</p>\n<p>Change the following in index.html:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">`<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/assets/vendor.css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>`</code></pre></div>\n<p>to</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/my-ember-app/dist/assets/vendor.css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>and continue for any other .js apps you are serving in your Ember app’s index.html</p>\n<p>Ember Data is certainly not required, but it definitely helps in a lot of cases. In order to save yourself from writing any adapters for Ember Data to support non-camelcase (the default in ASP.NET WebAPI), you use the following code in your Global.asax.cs to force JSON.NET to camelcase all of your responses, and expect the same in return. This also means you’re closer to supporting the jsonapi.org spec!</p>\n<h3>Adjusting APIs for Ember Data</h3>\n<p>In your <code class=\"language-text\">Global.asax.cs</code>, import <code class=\"language-text\">using Newtonsoft.Json;</code> and <code class=\"language-text\">using Newtonsoft.Json.Serialization;</code>and then include the following in your ApplicationStart() method:</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token comment\">//Camel case the JSON to format correctly for Ember</span>\n<span class=\"token keyword\">var</span> formatters <span class=\"token operator\">=</span> GlobalConfiguration<span class=\"token punctuation\">.</span>Configuration<span class=\"token punctuation\">.</span>Formatters<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> jsonFormatter <span class=\"token operator\">=</span> formatters<span class=\"token punctuation\">.</span>JsonFormatter<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> settings <span class=\"token operator\">=</span> jsonFormatter<span class=\"token punctuation\">.</span>SerializerSettings<span class=\"token punctuation\">;</span>\nsettings<span class=\"token punctuation\">.</span>Formatting <span class=\"token operator\">=</span> Formatting<span class=\"token punctuation\">.</span>Indented<span class=\"token punctuation\">;</span>\nsettings<span class=\"token punctuation\">.</span>ContractResolver <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CamelCasePropertyNamesContractResolver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This is to change the returned JSON format to be camel case, regardless of what casing your C# models are. Ember Data expects values to comply with the JSON API spec, which is why this is required.</p>"}