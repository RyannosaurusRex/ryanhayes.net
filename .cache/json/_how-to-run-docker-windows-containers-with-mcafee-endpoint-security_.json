{"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAIDBAEF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/9oADAMBAAIQAxAAAAGu+uc9YSe5EnAMv//EABsQAQEAAgMBAAAAAAAAAAAAAAIBAAMREiIx/9oACAEBAAEFAubsXmbLuEw3sEUs+4TISZi1QX//xAAZEQABBQAAAAAAAAAAAAAAAAAAARAREkH/2gAIAQMBAT8ByCiP/8QAGREAAwADAAAAAAAAAAAAAAAAAAEREBIh/9oACAECAQE/Ae2m7wj/xAAeEAACAQMFAAAAAAAAAAAAAAAAARECMVESISJBkf/aAAgBAQAGPwLU0h1VYixsmOlWyNp9HJEHpCk//8QAHRABAAICAgMAAAAAAAAAAAAAAQARITFRYXGBsf/aAAgBAQABPyGjGEDivHcDoor6iVJj7j09TYIXS7tJRll9ykjHE262BIUelcz/2gAMAwEAAgADAAAAEHTIQv/EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAwEBPxDBowiQ2//EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQIBAT8QgwvGTl//xAAdEAEBAAIDAAMAAAAAAAAAAAABEQAhMUFhUYGx/9oACAEBAAE/EAMggqndi9ZAexSFjt9dfWRAfkJ+4WigOgURY9uGhWcUBeeLtxQgt7jEkUkBoxi8HWCbMnJi7x//2Q==","width":400,"height":400,"src":"/static/be24937bd271ffcff6152e4850800cbd/8539d/ryan-hayes.jpg","srcSet":"/static/be24937bd271ffcff6152e4850800cbd/8539d/ryan-hayes.jpg 1x"}}},"markdownRemark":{"html":"<p>McAfee Endpoint Security and I have a love/hate relationship in that I hate it when it gets in my way and love it when it’s not installed. In general, I appreciate security and security research, but recently I had been trying out (or attempting to try out) Docker and Kubernetes for a project I’m working on. It’s a .NET 4.6 web application, and as such, requires Windows Server Core (as opposed to the much lighter-weight, new Windows Nano Server or a Linux-based container).  The fact that we now have an option to effectively containerize any application, including a windows application, is incredible. So yesterday, I decided to try and set it up. Here’s how it went.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.88541666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2GAAAdhgFdohOBAAACqElEQVQoz2WRWUjUURTG/9BjFL2UtJElRYtQCWkr1YsildBDGBVo2aJo+FBOLjFkpOOSZeU0LqVliajRpqbTjJZRKg2VZeaY+p8UtXBSZ3ecyF93RnqpAx/fdy7nfueeeyREuD0efoxbmbA7GffC5mDC4WJM8KjFLs5dmAVbnS6+j1lwuadEnYOfVruvxjHp9towPT2N5BVTnl++gjHrzCUvPFOT2B12bHYbvz1CO53CyO1r5jW0+OptPkOn28PfkNTHyyk5XUlJfCWliVUUnrjH4/xmun7+4v2wm44RN22Dk2jaLewqHiSycoQDFUNElA8RXjZETUsn79+28qa1lY6ODqTD8xJJWK0kbuV5Ypae48ic05zbc5PQu0MEXuln43WZdYLX58tIsZ+Yo+xmrsCslC8i70RR9Iwn1RVUVdeg1WqRaq818azgBfU3mqnN1/MwuxFD7Uf+jbYBF6mNo2Q0m0nXm7nk5SYzrz7J9H810m3sQZZF08wINRn7CsgQrNqv4WJYPuUX6njY7aD8nYX7HyzcEXxBN0rg1T7Cbn8jvPQbOzQmgsTrSxsMvH6pp6n5BQaDASna7yxRC84QLRAl9KHZCaRH3iLqwTChxTJ7S03sLpLZXjiAdLYHv0yZ+Rky8y72i/wr58ueU/+omsdPa2dGPumfQmJgOslbs0nekkXMYgWa2Ir/Rv48bCO3rotCfQ83tF/Q6Ixc1xpp7+zF1N9Hb28fJpNpxjA2IM23lHixnGMLFWQdVKPWiC9QZZGdk0OmSkVasoLg9WvYvS2Y0J1b2RESxPZNGyi8qUan19PQ0EBLSwvSqeWpeE1PLkvBq4/6JaGKLCD3cg6pqWkolUqSkpKIjYtj0ZKlrFkbSHDIZlauWo3/igDy8vJ8o9bV16PT6fgDVX1RP1SCoZYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/9bfab2653368fd96f0354778edbfdc74/d3720/image1.webp 293w,\n/static/9bfab2653368fd96f0354778edbfdc74/adc41/image1.webp 585w,\n/static/9bfab2653368fd96f0354778edbfdc74/0cf77/image1.webp 1170w,\n/static/9bfab2653368fd96f0354778edbfdc74/8d143/image1.webp 1755w,\n/static/9bfab2653368fd96f0354778edbfdc74/95753/image1.webp 1920w\"\n          sizes=\"(max-width: 1170px) 100vw, 1170px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/9bfab2653368fd96f0354778edbfdc74/8bef6/image1.png 293w,\n/static/9bfab2653368fd96f0354778edbfdc74/7b7df/image1.png 585w,\n/static/9bfab2653368fd96f0354778edbfdc74/3e398/image1.png 1170w,\n/static/9bfab2653368fd96f0354778edbfdc74/af797/image1.png 1755w,\n/static/9bfab2653368fd96f0354778edbfdc74/73135/image1.png 1920w\"\n          sizes=\"(max-width: 1170px) 100vw, 1170px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/9bfab2653368fd96f0354778edbfdc74/3e398/image1.png\"\n          alt=\"Windows docker\"\n          title=\"Windows docker\"\n        />\n      </picture>\n    </span></p>\n<p>The only potential downside that I had heard about Windows Server Core containers were that they were pretty big. When I say big I mean like real big. 10GB big.</p>\n<blockquote class=\"twitter-tweet\" data-lang=\"en\">\n  <p dir=\"ltr\" lang=\"en\">\n    Any issues with the size? ...we were playing with those and they were up into the 10 gig range.\n  </p>\n  \n  <p>\n    — Tom Pardue (@tparlimited) <a href=\"https://twitter.com/tparlimited/status/1016732280138731521?ref_src=twsrc%5Etfw\">July 10, 2018</a>\n  </p>\n</blockquote>\n<p>Ok, fine, that’s…that’s not good but there’s no other way to run full framework .NET apps inside Docker without it being in a WindowsServerCore container, so it’s something I’ll have to live with for now.</p>\n<h2>Installing Docker and gotchas</h2>\n<p>Installing Docker on Windows with McAfee is pretty straightforward. This was the first time I’d installed it in a couple years, so I was pleasantly surprised when the entire thing was pretty seamless. The wizard created the necessary docker-users security group and added me to it and has a pretty nice interface. There were a few initial setup steps that were unclear I had to lookup, though:</p>\n<ol>\n<li><strong>You need to add your user to the Hyper-V Administrators group.</strong> For whatever reason, the Docker for Windows installation created the docker-users group and added me there, but didn’t to the existing Hyper-V Administrators group. 🤷 This could be McAfee preventing the proper setup, but there were no error messages that I saw in the output related to this.</li>\n<li><strong>When building a docker container via the command line interface (Docker CLI)</strong>, the login information is different from what you use to log into the website.  The website accepts you username OR your email address (I use my email address), but <strong>the CLI will only accept your username, and not the email address.</strong>  It also doesn’t tell you why the login fails, so just get in a habit of using your username.</li>\n</ol>\n<h2>Issues building a docker image with McAfee Endpoint Security installed</h2>\n<p>Everything seemed to be going as well as I could expect until it came time to run <code class=\"language-text\">docker build</code> on my dockerfile and get everything set up.  It seemed to be pulling things from the registry OK, but then I was met with this error message:</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:\\WINDOWS\\system32> docker pull microsoft<span class=\"token operator\">/</span>windowsservercore  \n<span class=\"token keyword\">Using</span> default tag: latest  \nlatest: Pulling <span class=\"token keyword\">from</span> microsoft<span class=\"token operator\">/</span>windowsservercore  \n9c7f9c7d9bc2: Extracting <span class=\"token punctuation\">[</span>==================================================><span class=\"token punctuation\">]</span> 3<span class=\"token punctuation\">.</span>738 GB<span class=\"token operator\">/</span>3<span class=\"token punctuation\">.</span>738 GB  \nd33fff6043a1: Download complete  \nfailed to register layer: rename C:\\ProgramData\\Docker\\image\\windowsfilter\\layerdb\\tmp\\<span class=\"token function\">write</span><span class=\"token operator\">-</span><span class=\"token function\">set</span><span class=\"token operator\">-</span>925881297 C:\\ProgramData\\Docker\\image\\windowsfilter\\layerdb\\sha256\\3fd27ecef6a323f5ea7f3fde1f7b87a2dbfb1afa797f88fd7d20e8dbdc856f67: Access is denied<span class=\"token punctuation\">.</span></code></pre></div>\n<p>Ok, so let’s look at what’s happening here. <strong>It’s saying it can’t register a layer because access is denied on my computer’s file system, but I’m administrator!</strong> What could possibly be the issue? Then I remember. <em>McAfee.</em> A quick Google search showed a lot of other folks having the same kind of issue, and ends up that McAfee doesn’t even support Windows containers. Yea, that’s right.</p>\n<h3>McAfee Endpoint Security Does Not Support Windows-based Docker Containers!</h3>\n<p>After tons of research, the answer from McAfee itself (according to a knowledge base article), is that McAfee Endpoint Security does not support Windows Docker containers! It seems the main issues were:</p>\n<ul>\n<li>DNS does not resolve</li>\n<li>Performance issues with containers</li>\n<li>Slowness in opening containers</li>\n<li>Firewall/NAT issues</li>\n</ul>\n<p>To take a look for yourself, here’s the original <a href=\"https://kc.mcafee.com/corporate/index?page=content&#x26;id=KB90041&#x26;actp=null&#x26;viewlocale=en_US&#x26;showDraft=false&#x26;platinum_status=false&#x26;locale=en_US\">KB article on Windows Docker containers not being supported by McAfee</a>. McAfee updates this article with the current support status, so check here for any updates to McAfee’s support for both Docker on Windows as well as running McAfee inside of a Docker container (not that you would want to do that, but it’s not supported currently).</p>\n<h2>How can I run Windows Docker Containers on Windows if McAfee doesn’t support it?</h2>\n<p>There are actually a few workarounds that have been successful for me and my team:</p>\n<h3>Virtual Machines</h3>\n<p>First, you can use the docker tools inside a separate “real” virtual machine (using VMWare, VirtualBox, etc) and actually perform the work there. This gets you around McAfee being on the VM directly, but also has a few drawbacks. It will slow your workflow down as you’ll have the VM to jump through from your local machine to the docker tools and images you may be running. This is not ideal, but might give you some runway until McAfee can add support for Docker on Windows in the future.</p>\n<h3>.NET Core!</h3>\n<p><strong>McAfee says that Linux-based containers are OK</strong>. This means if you’re using a language or tools that require Windows containers, you may be able to move to something that doesn’t require them. This means you could use .NET Core, or potentially something else to run on a Linux container, which <em>is</em> supported.</p>\n<p>I know this isn’t much help, particularly if you have a large application already that you’re moving to Docker, but can be an option if you’re just starting out or if you are able to adjust your stack enough to be able to drop the Windows requirement.</p>\n<h3>Remove McAfee?</h3>\n<p>One of the possible solutions is to move away from McAfee. If Windows Docker containers are a hard requirement for you and no other options work well for your team, this might be the only option. </p>\n<h2>The bottom line</h2>\n<p>Basically, McAfee is really tough to work around as a developer, and Windows Docker containers are no exception. You have a limited options in the meantime, but I feel like the best recommendation is to not waste your time with workarounds and wait it out. McAfee should have an update at some point in the future to fix the issue. If you can’t afford to wait and the workarounds aren’t options, remember that making your voice heard on Twitter and Email and letting McAfee know this is important will go a long way in having them increase this as a priority.</p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"McAfee Endpoint Security and I have a love/hate relationship in that I hate it when it gets in my way and love it when it’s not installed. In general, I appreciate security and security research, but recently I had been trying out (or attempting to try out) Docker and Kubernetes for a project I’m working on. It’s a .NET 4.6 web application, and as such, requires Windows Server Core (as opposed to the much lighter-weight, new Windows Nano Server or a Linux-based container).  The fact that we now have an option to effectively containerize any application, including a windows application, is incredible. So yesterday, I decided to try and set it up. Here’s how it went."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 50.88541666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2GAAAdhgFdohOBAAACqElEQVQoz2WRWUjUURTG/9BjFL2UtJElRYtQCWkr1YsildBDGBVo2aJo+FBOLjFkpOOSZeU0LqVliajRpqbTjJZRKg2VZeaY+p8UtXBSZ3ecyF93RnqpAx/fdy7nfueeeyREuD0efoxbmbA7GffC5mDC4WJM8KjFLs5dmAVbnS6+j1lwuadEnYOfVruvxjHp9towPT2N5BVTnl++gjHrzCUvPFOT2B12bHYbvz1CO53CyO1r5jW0+OptPkOn28PfkNTHyyk5XUlJfCWliVUUnrjH4/xmun7+4v2wm44RN22Dk2jaLewqHiSycoQDFUNElA8RXjZETUsn79+28qa1lY6ODqTD8xJJWK0kbuV5Ypae48ic05zbc5PQu0MEXuln43WZdYLX58tIsZ+Yo+xmrsCslC8i70RR9Iwn1RVUVdeg1WqRaq818azgBfU3mqnN1/MwuxFD7Uf+jbYBF6mNo2Q0m0nXm7nk5SYzrz7J9H810m3sQZZF08wINRn7CsgQrNqv4WJYPuUX6njY7aD8nYX7HyzcEXxBN0rg1T7Cbn8jvPQbOzQmgsTrSxsMvH6pp6n5BQaDASna7yxRC84QLRAl9KHZCaRH3iLqwTChxTJ7S03sLpLZXjiAdLYHv0yZ+Rky8y72i/wr58ueU/+omsdPa2dGPumfQmJgOslbs0nekkXMYgWa2Ir/Rv48bCO3rotCfQ83tF/Q6Ixc1xpp7+zF1N9Hb28fJpNpxjA2IM23lHixnGMLFWQdVKPWiC9QZZGdk0OmSkVasoLg9WvYvS2Y0J1b2RESxPZNGyi8qUan19PQ0EBLSwvSqeWpeE1PLkvBq4/6JaGKLCD3cg6pqWkolUqSkpKIjYtj0ZKlrFkbSHDIZlauWo3/igDy8vJ8o9bV16PT6fgDVX1RP1SCoZYAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"picture","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"source","properties":{"srcSet":["/static/9bfab2653368fd96f0354778edbfdc74/d3720/image1.webp 293w","/static/9bfab2653368fd96f0354778edbfdc74/adc41/image1.webp 585w","/static/9bfab2653368fd96f0354778edbfdc74/0cf77/image1.webp 1170w","/static/9bfab2653368fd96f0354778edbfdc74/8d143/image1.webp 1755w","/static/9bfab2653368fd96f0354778edbfdc74/95753/image1.webp 1920w"],"sizes":["(max-width:","1170px)","100vw,","1170px"],"type":"image/webp"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"source","properties":{"srcSet":["/static/9bfab2653368fd96f0354778edbfdc74/8bef6/image1.png 293w","/static/9bfab2653368fd96f0354778edbfdc74/7b7df/image1.png 585w","/static/9bfab2653368fd96f0354778edbfdc74/3e398/image1.png 1170w","/static/9bfab2653368fd96f0354778edbfdc74/af797/image1.png 1755w","/static/9bfab2653368fd96f0354778edbfdc74/73135/image1.png 1920w"],"sizes":["(max-width:","1170px)","100vw,","1170px"],"type":"image/png"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"src":"/static/9bfab2653368fd96f0354778edbfdc74/3e398/image1.png","alt":"Windows docker","title":"Windows docker"},"children":[]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The only potential downside that I had heard about Windows Server Core containers were that they were pretty big. When I say big I mean like real big. 10GB big."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{"className":["twitter-tweet"],"dataLang":"en"},"children":[{"type":"text","value":"\n  "},{"type":"element","tagName":"p","properties":{"dir":"ltr","lang":"en"},"children":[{"type":"text","value":"\n    Any issues with the size? ...we were playing with those and they were up into the 10 gig range.\n  "}]},{"type":"text","value":"\n  \n  "},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"\n    — Tom Pardue (@tparlimited) "},{"type":"element","tagName":"a","properties":{"href":"https://twitter.com/tparlimited/status/1016732280138731521?ref_src=twsrc%5Etfw"},"children":[{"type":"text","value":"July 10, 2018"}]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Ok, fine, that’s…that’s not good but there’s no other way to run full framework .NET apps inside Docker without it being in a WindowsServerCore container, so it’s something I’ll have to live with for now."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Installing Docker and gotchas"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Installing Docker on Windows with McAfee is pretty straightforward. This was the first time I’d installed it in a couple years, so I was pleasantly surprised when the entire thing was pretty seamless. The wizard created the necessary docker-users security group and added me to it and has a pretty nice interface. There were a few initial setup steps that were unclear I had to lookup, though:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"You need to add your user to the Hyper-V Administrators group."}]},{"type":"text","value":" For whatever reason, the Docker for Windows installation created the docker-users group and added me there, but didn’t to the existing Hyper-V Administrators group. 🤷 This could be McAfee preventing the proper setup, but there were no error messages that I saw in the output related to this."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"When building a docker container via the command line interface (Docker CLI)"}]},{"type":"text","value":", the login information is different from what you use to log into the website.  The website accepts you username OR your email address (I use my email address), but "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"the CLI will only accept your username, and not the email address."}]},{"type":"text","value":"  It also doesn’t tell you why the login fails, so just get in a habit of using your username."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Issues building a docker image with McAfee Endpoint Security installed"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Everything seemed to be going as well as I could expect until it came time to run "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker build"}]},{"type":"text","value":" on my dockerfile and get everything set up.  It seemed to be pulling things from the registry OK, but then I was met with this error message:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"powershell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-powershell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-powershell"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"PS"}]},{"type":"text","value":" C:\\WINDOWS\\system32> docker pull microsoft"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"/"}]},{"type":"text","value":"windowsservercore  \n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"Using"}]},{"type":"text","value":" default tag: latest  \nlatest: Pulling "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" microsoft"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"/"}]},{"type":"text","value":"windowsservercore  \n9c7f9c7d9bc2: Extracting "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"==================================================>"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" 3"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"738 GB"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"/"}]},{"type":"text","value":"3"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"738 GB  \nd33fff6043a1: Download complete  \nfailed to register layer: rename C:\\ProgramData\\Docker\\image\\windowsfilter\\layerdb\\tmp\\"},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"write"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"set"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"925881297 C:\\ProgramData\\Docker\\image\\windowsfilter\\layerdb\\sha256\\3fd27ecef6a323f5ea7f3fde1f7b87a2dbfb1afa797f88fd7d20e8dbdc856f67: Access is denied"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Ok, so let’s look at what’s happening here. "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"It’s saying it can’t register a layer because access is denied on my computer’s file system, but I’m administrator!"}]},{"type":"text","value":" What could possibly be the issue? Then I remember. "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"McAfee."}]},{"type":"text","value":" A quick Google search showed a lot of other folks having the same kind of issue, and ends up that McAfee doesn’t even support Windows containers. Yea, that’s right."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"McAfee Endpoint Security Does Not Support Windows-based Docker Containers!"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"After tons of research, the answer from McAfee itself (according to a knowledge base article), is that McAfee Endpoint Security does not support Windows Docker containers! It seems the main issues were:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"DNS does not resolve"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Performance issues with containers"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Slowness in opening containers"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Firewall/NAT issues"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To take a look for yourself, here’s the original "},{"type":"element","tagName":"a","properties":{"href":"https://kc.mcafee.com/corporate/index?page=content&id=KB90041&actp=null&viewlocale=en_US&showDraft=false&platinum_status=false&locale=en_US"},"children":[{"type":"text","value":"KB article on Windows Docker containers not being supported by McAfee"}]},{"type":"text","value":". McAfee updates this article with the current support status, so check here for any updates to McAfee’s support for both Docker on Windows as well as running McAfee inside of a Docker container (not that you would want to do that, but it’s not supported currently)."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"How can I run Windows Docker Containers on Windows if McAfee doesn’t support it?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"There are actually a few workarounds that have been successful for me and my team:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Virtual Machines"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"First, you can use the docker tools inside a separate “real” virtual machine (using VMWare, VirtualBox, etc) and actually perform the work there. This gets you around McAfee being on the VM directly, but also has a few drawbacks. It will slow your workflow down as you’ll have the VM to jump through from your local machine to the docker tools and images you may be running. This is not ideal, but might give you some runway until McAfee can add support for Docker on Windows in the future."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":".NET Core!"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"McAfee says that Linux-based containers are OK"}]},{"type":"text","value":". This means if you’re using a language or tools that require Windows containers, you may be able to move to something that doesn’t require them. This means you could use .NET Core, or potentially something else to run on a Linux container, which "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"is"}]},{"type":"text","value":" supported."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"I know this isn’t much help, particularly if you have a large application already that you’re moving to Docker, but can be an option if you’re just starting out or if you are able to adjust your stack enough to be able to drop the Windows requirement."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Remove McAfee?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"One of the possible solutions is to move away from McAfee. If Windows Docker containers are a hard requirement for you and no other options work well for your team, this might be the only option. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"The bottom line"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Basically, McAfee is really tough to work around as a developer, and Windows Docker containers are no exception. You have a limited options in the meantime, but I feel like the best recommendation is to not waste your time with workarounds and wait it out. McAfee should have an update at some point in the future to fix the issue. If you can’t afford to wait and the workarounds aren’t options, remember that making your voice heard on Twitter and Email and letting McAfee know this is important will go a long way in having them increase this as a priority."}]}],"data":{"quirksMode":false}},"excerpt":"McAfee Endpoint Security and I have a love/hate relationship in that I hate it when it gets in my way and love it when it’s not installed…","timeToRead":5,"frontmatter":{"title":"How to run Docker Windows Containers with McAfee Endpoint Security","userDate":"27 July 2018","date":"2018-07-27T15:14:27.000Z","tags":["Docker","McAfee"],"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFA//EABYBAQEBAAAAAAAAAAAAAAAAAAECA//aAAwDAQACEAMQAAABSqxbUaOGQH//xAAZEAADAQEBAAAAAAAAAAAAAAAAAQMCESH/2gAIAQEAAQUCmiWDwlpkmdP/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwFn/8QAFhAAAwAAAAAAAAAAAAAAAAAAACAh/9oACAEBAAY/Air/AP/EABoQAAMAAwEAAAAAAAAAAAAAAAABERAhMYH/2gAIAQEAAT8hulskuPCKXQpU8P/aAAwDAQACAAMAAAAQ8z//xAAXEQADAQAAAAAAAAAAAAAAAAABEBEx/9oACAEDAQE/EBlX/8QAFREBAQAAAAAAAAAAAAAAAAAAEDH/2gAIAQIBAT8Qo//EABoQAQEBAQEBAQAAAAAAAAAAAAERACExcZH/2gAIAQEAAT8QjE21pS7jpHpVwKc09xPnf3IgWA9cofDf/9k=","aspectRatio":1.4998528979111503,"src":"/static/6d82f8ea3bee4f38417a8b300034878b/45a11/boat-container.jpg","srcSet":"/static/6d82f8ea3bee4f38417a8b300034878b/f8f18/boat-container.jpg 930w,\n/static/6d82f8ea3bee4f38417a8b300034878b/0e6ff/boat-container.jpg 1860w,\n/static/6d82f8ea3bee4f38417a8b300034878b/45a11/boat-container.jpg 3720w,\n/static/6d82f8ea3bee4f38417a8b300034878b/e94cc/boat-container.jpg 5098w","sizes":"(max-width: 3720px) 100vw, 3720px"}}},"author":{"id":"Ryan Hayes","bio":"Hi, I'm Ryan. I'm an 8x Microsoft MVP and lead engineer who loves building software development teams and multiplying their productivity.","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAIDBAEF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/9oADAMBAAIQAxAAAAGu+uc9YSe5EnAMv//EABsQAQEAAgMBAAAAAAAAAAAAAAIBAAMREiIx/9oACAEBAAEFAubsXmbLuEw3sEUs+4TISZi1QX//xAAZEQABBQAAAAAAAAAAAAAAAAAAARAREkH/2gAIAQMBAT8ByCiP/8QAGREAAwADAAAAAAAAAAAAAAAAAAEREBIh/9oACAECAQE/Ae2m7wj/xAAeEAACAQMFAAAAAAAAAAAAAAAAARECMVESISJBkf/aAAgBAQAGPwLU0h1VYixsmOlWyNp9HJEHpCk//8QAHRABAAICAgMAAAAAAAAAAAAAAQARITFRYXGBsf/aAAgBAQABPyGjGEDivHcDoor6iVJj7j09TYIXS7tJRll9ykjHE262BIUelcz/2gAMAwEAAgADAAAAEHTIQv/EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAwEBPxDBowiQ2//EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQIBAT8QgwvGTl//xAAdEAEBAAIDAAMAAAAAAAAAAAABEQAhMUFhUYGx/9oACAEBAAE/EAMggqndi9ZAexSFjt9dfWRAfkJ+4WigOgURY9uGhWcUBeeLtxQgt7jEkUkBoxi8HWCbMnJi7x//2Q==","width":400,"height":400,"src":"/static/be24937bd271ffcff6152e4850800cbd/f4032/ryan-hayes.jpg","srcSet":"/static/be24937bd271ffcff6152e4850800cbd/f4032/ryan-hayes.jpg 1x"}}]}}}},"relatedPosts":{"totalCount":1,"edges":[{"node":{"id":"e9df59c8-f881-5b03-bd5d-febc4a788abf","timeToRead":5,"excerpt":"McAfee Endpoint Security and I have a love/hate relationship in that I hate it when it gets in my way and love it when it’s not installed…","frontmatter":{"title":"How to run Docker Windows Containers with McAfee Endpoint Security"},"fields":{"slug":"/how-to-run-docker-windows-containers-with-mcafee-endpoint-security/"}}}]}},"pageContext":{"slug":"/how-to-run-docker-windows-containers-with-mcafee-endpoint-security/","prev":{"excerpt":"Recently I had an issue where when I would try to run and debug a webapp inside Visual Studio 2017, I would get an error where the .dlls…","timeToRead":2,"frontmatter":{"title":"How to Permanently Fix \"Could not copy \"C:\\MyProject\\MyDLL.dll\" to \"C:\\MyProject\\bin\\Debug\\MyDLL.dll\".","tags":null,"date":"2018-06-18T19:03:02.000Z","draft":null,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.5,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAv/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAa41aJxgf//EABgQAAMBAQAAAAAAAAAAAAAAAAABAhIi/9oACAEBAAEFAm5U3OV0IRk//8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8BR//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABoQAAICAwAAAAAAAAAAAAAAAAERAAISIEH/2gAIAQEABj8CwqHCu6//xAAbEAACAwADAAAAAAAAAAAAAAAAAREhMVFhgf/aAAgBAQABPyH1qcDIjtYoLEYJF7k//9oADAMBAAIAAwAAABAXz//EABYRAAMAAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPxBKEH//xAAWEQEBAQAAAAAAAAAAAAAAAAARAAH/2gAIAQIBAT8QWdv/xAAdEAEBAAICAwEAAAAAAAAAAAABEQAxIXFBUZHR/9oACAEBAAE/EIgJ3uL3fLlx3daP5hkIGh5mC30ZyWnUxDU/mf/Z","sizes":"(max-width: 3720px) 100vw, 3720px","src":"/static/fd751a920788255b3f752ac55d71a03b/45a11/demo1.jpg","srcSet":"/static/fd751a920788255b3f752ac55d71a03b/f8f18/demo1.jpg 930w,\n/static/fd751a920788255b3f752ac55d71a03b/0e6ff/demo1.jpg 1860w,\n/static/fd751a920788255b3f752ac55d71a03b/45a11/demo1.jpg 3720w,\n/static/fd751a920788255b3f752ac55d71a03b/c537a/demo1.jpg 4608w"}}},"author":{"id":"Ryan Hayes","bio":"Hi, I'm Ryan. I'm an 8x Microsoft MVP and lead engineer who loves building software development teams and multiplying their productivity.","avatar":{"children":[{"fixed":{"src":"/static/be24937bd271ffcff6152e4850800cbd/f4032/ryan-hayes.jpg"}}]}}},"fields":{"layout":"post","slug":"/how-to-permanently-fix-could-not-copy-dll-to-dll/"}},"next":{"excerpt":"I run the software systems for Harvest Community Church and also play guitar for our 3 services on Sunday.  We’ve been using Planning Center…","timeToRead":6,"frontmatter":{"title":"How to migrate from Rock RMS to Planning Center Online","tags":["RockRMS","Planning Center","Open Source",null],"date":"2019-02-26T13:07:15.000Z","draft":null,"image":{"childImageSharp":{"fluid":{"aspectRatio":2.6666666666666665,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABQElEQVQY02PQib8BRPqJN/QTbkDYxCMG3fgb6tHXZYKuyodc1Yq7oQsW1Uu4oQs2SzcBivTACC4C1awRc92r5O7MjW+aF7wwTb2pFnVdK/aGUsQ1lYjrGtHXVaOuARFQUCXymlL4Na1YEAOIoJrVI6+v2/vhyPEvFy5/b5nzsmrqs+5FL2umP6ue9qx13gsgmd39JLXtUeW0p3WznrfPe9ky90XxpKd68Te0gZo1o26s2fVh54HPN+/+mLDwdWX/8/z2pzltT9KbgOhxSv3j/oWvCrueZjY/Tm98nFz/uKDjSVTVA504sM2aMdf9Cu7PXPGmc/ZLm5Q76hE3VMOvqwBRxHVVIAq/bhR7Uyv6hkoYiA0UAUqpRV6HOhuIgX5TCLymGHwNGGA6CYhAgiDteJSQQwkwkAQweJNu6CWSHFUAGlf1B99k5kIAAAAASUVORK5CYII=","sizes":"(max-width: 1200px) 100vw, 1200px","src":"/static/d2cf6511d5dede273205d16bf702e199/ba299/planning-center-online-logo.png","srcSet":"/static/d2cf6511d5dede273205d16bf702e199/4c9af/planning-center-online-logo.png 930w,\n/static/d2cf6511d5dede273205d16bf702e199/ba299/planning-center-online-logo.png 1200w"}}},"author":{"id":"Ryan Hayes","bio":"Hi, I'm Ryan. I'm an 8x Microsoft MVP and lead engineer who loves building software development teams and multiplying their productivity.","avatar":{"children":[{"fixed":{"src":"/static/be24937bd271ffcff6152e4850800cbd/f4032/ryan-hayes.jpg"}}]}}},"fields":{"layout":"post","slug":"/how-to-migrate-from-rock-rms-to-planning-center-online/"}},"primaryTag":"Docker"}}